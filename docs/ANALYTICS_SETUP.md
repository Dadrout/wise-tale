# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–π

## üìä –¢–µ–∫—É—â–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### Firebase Analytics (Google Analytics)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ —Å—Ç—Ä–∞–Ω–∏—Ü
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Analytics —á–µ—Ä–µ–∑ Firebase
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üéØ –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–°–æ–±—ã—Ç–∏–µ**: `user_registered`
- **–¢—Ä–∏–≥–≥–µ—Ä**: –£—Å–ø–µ—à–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ email
- **–í–æ—Ä–æ–Ω–∫–∞**: `registration_completed`

### 2. –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- **–°–æ–±—ã—Ç–∏–µ**: `user_logged_in`
- **–¢—Ä–∏–≥–≥–µ—Ä**: –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ Google –∏–ª–∏ email
- **–ú–µ—Ç—Ä–∏–∫–∞**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–π
- **–°–æ–±—ã—Ç–∏–µ**: `story_generated`
- **–¢—Ä–∏–≥–≥–µ—Ä**: –£—Å–ø–µ—à–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
- **–í–æ—Ä–æ–Ω–∫–∞**: 
  - `story_generation_started` (—à–∞–≥ 1/3)
  - `story_generation_completed` (—à–∞–≥ 3/3)

### 4. –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
- **–°–æ–±—ã—Ç–∏–µ**: `user_engagement`
- **–¢—Ä–∏–≥–≥–µ—Ä**: –í—Ä–µ–º—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ > 10 —Å–µ–∫—É–Ω–¥
- **–ú–µ—Ç—Ä–∏–∫–∞**: –í—Ä–µ–º—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö

## üìà –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Google Analytics

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Ü–µ–ª–µ–π (Goals)

#### –¶–µ–ª—å 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
```
–¢–∏–ø: –°–æ–±—ã—Ç–∏–µ
–ö–∞—Ç–µ–≥–æ—Ä–∏—è: conversion
–î–µ–π—Å—Ç–≤–∏–µ: user_registered
```

#### –¶–µ–ª—å 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–∏
```
–¢–∏–ø: –°–æ–±—ã—Ç–∏–µ
–ö–∞—Ç–µ–≥–æ—Ä–∏—è: conversion
–î–µ–π—Å—Ç–≤–∏–µ: story_generated
```

#### –¶–µ–ª—å 3: –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
```
–¢–∏–ø: –°–æ–±—ã—Ç–∏–µ
–ö–∞—Ç–µ–≥–æ—Ä–∏—è: conversion
–î–µ–π—Å—Ç–≤–∏–µ: user_logged_in
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–æ—Ä–æ–Ω–∫–∏ (Funnel)

#### –í–æ—Ä–æ–Ω–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
1. –ü–æ—Å–µ—â–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
2. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã
3. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email
4. –ü–µ—Ä–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–∏

#### –í–æ—Ä–æ–Ω–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏—Å—Ç–æ—Ä–∏–∏:
1. –í—ã–±–æ—Ä —Ç–µ–º—ã (`story_generation_started`)
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
3. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (`story_generation_completed`)

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ E-commerce (–µ—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è)

```javascript
// –ü—Ä–∏–º–µ—Ä –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–∫—É–ø–∫–∏
trackConversion('purchase', 9.99, 'USD')
```

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–π
```javascript
import { trackConversion } from '@/lib/analytics'

// –û—Ç—Å–ª–µ–¥–∏—Ç—å –ø–æ–∫—É–ø–∫—É
trackConversion('premium_upgrade', 19.99, 'USD')

// –û—Ç—Å–ª–µ–¥–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
trackConversion('subscription', 9.99, 'USD')
```

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–æ—Ä–æ–Ω–∫–∏
```javascript
import { trackFunnelStep } from '@/lib/analytics'

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—á–∞–ª –ø—Ä–æ—Ü–µ—Å—Å
trackFunnelStep('onboarding_started', 1, 4)

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≤–µ—Ä—à–∏–ª —à–∞–≥
trackFunnelStep('onboarding_completed', 4, 4)
```

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```javascript
import { trackUserJourney } from '@/lib/analytics'

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—à–µ–ª –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
trackUserJourney('landing_page_visit')

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–≤–µ–ª –≤—Ä–µ–º—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
trackUserJourney('feature_exploration', 30000) // 30 —Å–µ–∫—É–Ω–¥
```

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
```javascript
import { trackFeatureUsage } from '@/lib/analytics'

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Ñ—É–Ω–∫—Ü–∏—é
trackFeatureUsage('voice_selection')

// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Ñ—É–Ω–∫—Ü–∏—é –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
trackFeatureUsage('story_regeneration', 3)
```

## üìä –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

### –ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (KPIs)
1. **Conversion Rate** - –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å
2. **Story Generation Rate** - –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Å–æ–∑–¥–∞–≤—à–∏—Ö –∏—Å—Ç–æ—Ä–∏—é
3. **Retention Rate** - –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≤–µ—Ä–Ω—É–≤—à–∏—Ö—Å—è —á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π
4. **Engagement Time** - —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –Ω–∞ —Å–∞–π—Ç–µ
5. **Bounce Rate** - –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø–æ–∫–∏–Ω—É–≤—à–∏—Ö —Å–∞–π—Ç –±–µ–∑ –¥–µ–π—Å—Ç–≤–∏–π

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
- `page_view` - –ø—Ä–æ—Å–º–æ—Ç—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü
- `story_interaction` - –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –∏—Å—Ç–æ—Ä–∏—è–º–∏
- `user_engagement` - –≤—Ä–µ–º—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
- `conversion` - –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
- `funnel_step` - —à–∞–≥–∏ –≤–æ—Ä–æ–Ω–∫–∏
- `user_journey` - –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `feature_usage` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–µ–ª–µ–π –≤ Google Analytics**
2. **–°–æ–∑–¥–∞–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–æ–≤ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫**
3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö**
4. **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–π**
5. **–ê–Ω–∞–ª–∏–∑ –≤–æ—Ä–æ–Ω–∫–∏ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è —É–∑–∫–∏—Ö –º–µ—Å—Ç**

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ —Å–æ–±—ã—Ç–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ Firebase Analytics
- –î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å Google Analytics
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Å—Ç–æ—Ä–æ–Ω–µ
- –í—Ä–µ–º—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `EngagementTracker` 